{"ast":null,"code":"var _jsxFileName = \"/home/honza/webusb-test/src/webglAppSin.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from \"react\";\nimport { WebglPlot, WebglLine, ColorRGBA } from \"webgl-plot\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet webglp;\nlet line;\nexport default function WebglAppSin(_ref) {\n  _s();\n\n  let {\n    data\n  } = _ref;\n  const canvasMain = useRef(null);\n  useEffect(() => {\n    if (canvasMain.current) {\n      webglp = new WebglPlot(canvasMain.current);\n      const numX = 1000;\n      line = new WebglLine(new ColorRGBA(1, 0, 0, 1), numX);\n      webglp.addLine(line);\n      line.arrangeX();\n    }\n  }, []);\n  useEffect(() => {\n    let id = 0;\n\n    let renderPlot = () => {\n      let flatData = data.flat();\n      let max = 32;\n\n      for (let i = 0; i < line.numPoints; i++) {\n        line.setY(i, 2 * flatData[Math.round(flatData.length * i / line.numPoints)] / max - 1);\n      }\n\n      id = requestAnimationFrame(renderPlot);\n      webglp.update();\n    };\n\n    id = requestAnimationFrame(renderPlot);\n    return () => {\n      renderPlot = () => {};\n\n      cancelAnimationFrame(id);\n    };\n  }, [data]);\n  const canvasStyle = {\n    width: \"100%\",\n    //height: \"100vh\",\n    border: \"1px solid black\"\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      style: canvasStyle,\n      ref: canvasMain\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n\n_s(WebglAppSin, \"eerRSUIQXrqWLr9QmdFUEAin0qc=\");\n\n_c = WebglAppSin;\n\nvar _c;\n\n$RefreshReg$(_c, \"WebglAppSin\");","map":{"version":3,"names":["React","useEffect","useRef","WebglPlot","WebglLine","ColorRGBA","webglp","line","WebglAppSin","data","canvasMain","current","numX","addLine","arrangeX","id","renderPlot","flatData","flat","max","i","numPoints","setY","Math","round","length","requestAnimationFrame","update","cancelAnimationFrame","canvasStyle","width","border"],"sources":["/home/honza/webusb-test/src/webglAppSin.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\n\nimport { WebglPlot, WebglLine, ColorRGBA } from \"webgl-plot\";\n\nlet webglp;\nlet line;\n\n\nexport default function WebglAppSin({data}) {\n  const canvasMain = useRef(null);\n\n  useEffect(() => {\n    if (canvasMain.current) {\n\n\n      webglp = new WebglPlot(canvasMain.current);\n      const numX = 1000;\n\n      line = new WebglLine(new ColorRGBA(1, 0, 0, 1), numX);\n      webglp.addLine(line);\n\n      line.arrangeX();\n    }\n  }, []);\n\n  useEffect(() => {\n    let id = 0;\n    let renderPlot = () => {\n      let flatData = data.flat();\n      let max = 32\n      for (let i = 0; i < line.numPoints; i++) {\n        line.setY(i, 2 * flatData[Math.round(flatData.length * i / line.numPoints)] / max  - 1);\n      }\n      id = requestAnimationFrame(renderPlot);\n      webglp.update();\n    };\n    id = requestAnimationFrame(renderPlot);\n\n    return () => {\n      renderPlot = () => {};\n      cancelAnimationFrame(id);\n    };\n  }, [data]);\n\n  const canvasStyle = {\n    width: \"100%\",\n    //height: \"100vh\",\n    border: \"1px solid black\"\n  };\n\n  return (\n    <div>\n      <canvas style={canvasStyle} ref={canvasMain} />\n    </div>\n  );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,QAAyC,OAAzC;AAEA,SAASC,SAAT,EAAoBC,SAApB,EAA+BC,SAA/B,QAAgD,YAAhD;;AAEA,IAAIC,MAAJ;AACA,IAAIC,IAAJ;AAGA,eAAe,SAASC,WAAT,OAA6B;EAAA;;EAAA,IAAR;IAACC;EAAD,CAAQ;EAC1C,MAAMC,UAAU,GAAGR,MAAM,CAAC,IAAD,CAAzB;EAEAD,SAAS,CAAC,MAAM;IACd,IAAIS,UAAU,CAACC,OAAf,EAAwB;MAGtBL,MAAM,GAAG,IAAIH,SAAJ,CAAcO,UAAU,CAACC,OAAzB,CAAT;MACA,MAAMC,IAAI,GAAG,IAAb;MAEAL,IAAI,GAAG,IAAIH,SAAJ,CAAc,IAAIC,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CAAd,EAAyCO,IAAzC,CAAP;MACAN,MAAM,CAACO,OAAP,CAAeN,IAAf;MAEAA,IAAI,CAACO,QAAL;IACD;EACF,CAZQ,EAYN,EAZM,CAAT;EAcAb,SAAS,CAAC,MAAM;IACd,IAAIc,EAAE,GAAG,CAAT;;IACA,IAAIC,UAAU,GAAG,MAAM;MACrB,IAAIC,QAAQ,GAAGR,IAAI,CAACS,IAAL,EAAf;MACA,IAAIC,GAAG,GAAG,EAAV;;MACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,IAAI,CAACc,SAAzB,EAAoCD,CAAC,EAArC,EAAyC;QACvCb,IAAI,CAACe,IAAL,CAAUF,CAAV,EAAa,IAAIH,QAAQ,CAACM,IAAI,CAACC,KAAL,CAAWP,QAAQ,CAACQ,MAAT,GAAkBL,CAAlB,GAAsBb,IAAI,CAACc,SAAtC,CAAD,CAAZ,GAAiEF,GAAjE,GAAwE,CAArF;MACD;;MACDJ,EAAE,GAAGW,qBAAqB,CAACV,UAAD,CAA1B;MACAV,MAAM,CAACqB,MAAP;IACD,CARD;;IASAZ,EAAE,GAAGW,qBAAqB,CAACV,UAAD,CAA1B;IAEA,OAAO,MAAM;MACXA,UAAU,GAAG,MAAM,CAAE,CAArB;;MACAY,oBAAoB,CAACb,EAAD,CAApB;IACD,CAHD;EAID,CAjBQ,EAiBN,CAACN,IAAD,CAjBM,CAAT;EAmBA,MAAMoB,WAAW,GAAG;IAClBC,KAAK,EAAE,MADW;IAElB;IACAC,MAAM,EAAE;EAHU,CAApB;EAMA,oBACE;IAAA,uBACE;MAAQ,KAAK,EAAEF,WAAf;MAA4B,GAAG,EAAEnB;IAAjC;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAKD;;GA/CuBF,W;;KAAAA,W"},"metadata":{},"sourceType":"module"}