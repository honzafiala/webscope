{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport { notifyManager } from '../core/notifyManager';\nimport { noop, parseMutationArgs } from '../core/utils';\nimport { MutationObserver } from '../core/mutationObserver';\nimport { useQueryClient } from './QueryClientProvider';\nimport { shouldThrowError } from './utils'; // HOOK\n\nexport function useMutation(arg1, arg2, arg3) {\n  var mountedRef = React.useRef(false);\n\n  var _React$useState = React.useState(0),\n      forceUpdate = _React$useState[1];\n\n  var options = parseMutationArgs(arg1, arg2, arg3);\n  var queryClient = useQueryClient();\n  var obsRef = React.useRef();\n\n  if (!obsRef.current) {\n    obsRef.current = new MutationObserver(queryClient, options);\n  } else {\n    obsRef.current.setOptions(options);\n  }\n\n  var currentResult = obsRef.current.getCurrentResult();\n  React.useEffect(function () {\n    mountedRef.current = true;\n    var unsubscribe = obsRef.current.subscribe(notifyManager.batchCalls(function () {\n      if (mountedRef.current) {\n        forceUpdate(function (x) {\n          return x + 1;\n        });\n      }\n    }));\n    return function () {\n      mountedRef.current = false;\n      unsubscribe();\n    };\n  }, []);\n  var mutate = React.useCallback(function (variables, mutateOptions) {\n    obsRef.current.mutate(variables, mutateOptions).catch(noop);\n  }, []);\n\n  if (currentResult.error && shouldThrowError(undefined, obsRef.current.options.useErrorBoundary, [currentResult.error])) {\n    throw currentResult.error;\n  }\n\n  return _extends({}, currentResult, {\n    mutate: mutate,\n    mutateAsync: currentResult.mutate\n  });\n}","map":{"version":3,"names":["_extends","React","notifyManager","noop","parseMutationArgs","MutationObserver","useQueryClient","shouldThrowError","useMutation","arg1","arg2","arg3","mountedRef","useRef","_React$useState","useState","forceUpdate","options","queryClient","obsRef","current","setOptions","currentResult","getCurrentResult","useEffect","unsubscribe","subscribe","batchCalls","x","mutate","useCallback","variables","mutateOptions","catch","error","undefined","useErrorBoundary","mutateAsync"],"sources":["/home/honza/node_modules/react-query/es/react/useMutation.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport { notifyManager } from '../core/notifyManager';\nimport { noop, parseMutationArgs } from '../core/utils';\nimport { MutationObserver } from '../core/mutationObserver';\nimport { useQueryClient } from './QueryClientProvider';\nimport { shouldThrowError } from './utils'; // HOOK\n\nexport function useMutation(arg1, arg2, arg3) {\n  var mountedRef = React.useRef(false);\n\n  var _React$useState = React.useState(0),\n      forceUpdate = _React$useState[1];\n\n  var options = parseMutationArgs(arg1, arg2, arg3);\n  var queryClient = useQueryClient();\n  var obsRef = React.useRef();\n\n  if (!obsRef.current) {\n    obsRef.current = new MutationObserver(queryClient, options);\n  } else {\n    obsRef.current.setOptions(options);\n  }\n\n  var currentResult = obsRef.current.getCurrentResult();\n  React.useEffect(function () {\n    mountedRef.current = true;\n    var unsubscribe = obsRef.current.subscribe(notifyManager.batchCalls(function () {\n      if (mountedRef.current) {\n        forceUpdate(function (x) {\n          return x + 1;\n        });\n      }\n    }));\n    return function () {\n      mountedRef.current = false;\n      unsubscribe();\n    };\n  }, []);\n  var mutate = React.useCallback(function (variables, mutateOptions) {\n    obsRef.current.mutate(variables, mutateOptions).catch(noop);\n  }, []);\n\n  if (currentResult.error && shouldThrowError(undefined, obsRef.current.options.useErrorBoundary, [currentResult.error])) {\n    throw currentResult.error;\n  }\n\n  return _extends({}, currentResult, {\n    mutate: mutate,\n    mutateAsync: currentResult.mutate\n  });\n}"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,IAAT,EAAeC,iBAAf,QAAwC,eAAxC;AACA,SAASC,gBAAT,QAAiC,0BAAjC;AACA,SAASC,cAAT,QAA+B,uBAA/B;AACA,SAASC,gBAAT,QAAiC,SAAjC,C,CAA4C;;AAE5C,OAAO,SAASC,WAAT,CAAqBC,IAArB,EAA2BC,IAA3B,EAAiCC,IAAjC,EAAuC;EAC5C,IAAIC,UAAU,GAAGX,KAAK,CAACY,MAAN,CAAa,KAAb,CAAjB;;EAEA,IAAIC,eAAe,GAAGb,KAAK,CAACc,QAAN,CAAe,CAAf,CAAtB;EAAA,IACIC,WAAW,GAAGF,eAAe,CAAC,CAAD,CADjC;;EAGA,IAAIG,OAAO,GAAGb,iBAAiB,CAACK,IAAD,EAAOC,IAAP,EAAaC,IAAb,CAA/B;EACA,IAAIO,WAAW,GAAGZ,cAAc,EAAhC;EACA,IAAIa,MAAM,GAAGlB,KAAK,CAACY,MAAN,EAAb;;EAEA,IAAI,CAACM,MAAM,CAACC,OAAZ,EAAqB;IACnBD,MAAM,CAACC,OAAP,GAAiB,IAAIf,gBAAJ,CAAqBa,WAArB,EAAkCD,OAAlC,CAAjB;EACD,CAFD,MAEO;IACLE,MAAM,CAACC,OAAP,CAAeC,UAAf,CAA0BJ,OAA1B;EACD;;EAED,IAAIK,aAAa,GAAGH,MAAM,CAACC,OAAP,CAAeG,gBAAf,EAApB;EACAtB,KAAK,CAACuB,SAAN,CAAgB,YAAY;IAC1BZ,UAAU,CAACQ,OAAX,GAAqB,IAArB;IACA,IAAIK,WAAW,GAAGN,MAAM,CAACC,OAAP,CAAeM,SAAf,CAAyBxB,aAAa,CAACyB,UAAd,CAAyB,YAAY;MAC9E,IAAIf,UAAU,CAACQ,OAAf,EAAwB;QACtBJ,WAAW,CAAC,UAAUY,CAAV,EAAa;UACvB,OAAOA,CAAC,GAAG,CAAX;QACD,CAFU,CAAX;MAGD;IACF,CAN0C,CAAzB,CAAlB;IAOA,OAAO,YAAY;MACjBhB,UAAU,CAACQ,OAAX,GAAqB,KAArB;MACAK,WAAW;IACZ,CAHD;EAID,CAbD,EAaG,EAbH;EAcA,IAAII,MAAM,GAAG5B,KAAK,CAAC6B,WAAN,CAAkB,UAAUC,SAAV,EAAqBC,aAArB,EAAoC;IACjEb,MAAM,CAACC,OAAP,CAAeS,MAAf,CAAsBE,SAAtB,EAAiCC,aAAjC,EAAgDC,KAAhD,CAAsD9B,IAAtD;EACD,CAFY,EAEV,EAFU,CAAb;;EAIA,IAAImB,aAAa,CAACY,KAAd,IAAuB3B,gBAAgB,CAAC4B,SAAD,EAAYhB,MAAM,CAACC,OAAP,CAAeH,OAAf,CAAuBmB,gBAAnC,EAAqD,CAACd,aAAa,CAACY,KAAf,CAArD,CAA3C,EAAwH;IACtH,MAAMZ,aAAa,CAACY,KAApB;EACD;;EAED,OAAOlC,QAAQ,CAAC,EAAD,EAAKsB,aAAL,EAAoB;IACjCO,MAAM,EAAEA,MADyB;IAEjCQ,WAAW,EAAEf,aAAa,CAACO;EAFM,CAApB,CAAf;AAID"},"metadata":{},"sourceType":"module"}